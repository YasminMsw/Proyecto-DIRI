import{u as f,m as N,b,r as w,j as a,n as h,o as m,p as y,d as x,q as L,t as D,v as d}from"./index-CjLSL0fJ.js";const T=({onEdit:g,filters:o})=>{const r=f(),u=N(t=>t.transactions.list),{t:e}=b(),j=async t=>{await L(D(d,"transactions",t));const s=(await h(m(d,"transactions"))).docs.map(c=>({id:c.id,...c.data()}));r(y(s)),x.info(`Usuario eliminó una transacción con ID: ${t}`)};w.useEffect(()=>{(async()=>{const s=(await h(m(d,"transactions"))).docs.map(c=>{const n=c.data();return{id:c.id,type:n.type,amount:n.amount,category:n.category,date:n.date,description:n.description}});r(y(s)),x.info(`Cargar lista de transacciones: ${JSON.stringify(s)}`)})()},[r]);const l=u.filter(t=>{var n,p;const i=!o.type||t.type===o.type,s=!o.category||((n=t.category)==null?void 0:n.toLowerCase().includes(o.category.toLowerCase())),c=!o.date||(typeof t.date=="string"?t.date.slice(0,10):t.date instanceof Date?t.date.toISOString().slice(0,10):typeof((p=t.date)==null?void 0:p.toDate)=="function"?t.date.toDate().toISOString().slice(0,10):"")===o.date;return i&&s&&c});return l.length===0?a.jsx("p",{className:"p-4 text-gray-500",children:e("transactionList.no_transactions")}):a.jsx("div",{className:"py-4 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full bg-white shadow rounded",children:[a.jsx("thead",{className:"bg-teal-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-4 py-3",children:e("transactionList.date")}),a.jsx("th",{className:"text-left px-4 py-3",children:e("transactionList.type")}),a.jsx("th",{className:"text-left px-4 py-3",children:e("transactionList.amount")}),a.jsx("th",{className:"text-left px-4 py-3",children:e("transactionList.category")}),a.jsx("th",{className:"text-left px-4 py-3",children:e("transactionList.description")}),a.jsx("th",{className:"text-left px-4 py-3",children:e("transactionList.actions")})]})}),a.jsx("tbody",{children:l.map(t=>{var i,s;return a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.date?new Date(typeof t.date=="string"?t.date:(s=(i=t.date).toDate)==null?void 0:s.call(i)).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"}),a.jsx("td",{className:"px-4 py-3 font-medium",children:t.type==="income"?e("transaction.income"):e("transaction.expense")}),a.jsxs("td",{className:"px-4 py-3 text-green-700 font-semibold",children:[t.amount,"€"]}),a.jsx("td",{className:"px-4 py-3",children:t.category}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.description||"-"}),a.jsxs("td",{className:"px-4 py-3 space-x-2",children:[a.jsx("button",{onClick:()=>g(t),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:e("transactionList.edit")}),a.jsx("button",{onClick:()=>j(t.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:e("transactionList.delete")})]})]},t.id)})})]})})};export{T as default};
